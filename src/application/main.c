/****************************************************************************
* Includes
*****************************************************************************/
#include <stdlib.h>
#include <stdint.h>
#include <string.h>

#include "system.h"

/*****************************************************************************
* Macros
******************************************************************************/

/*****************************************************************************
* Static variables
******************************************************************************/

/*****************************************************************************
* Static prototypes
******************************************************************************/

/******************************************************************************
* Function definitions
******************************************************************************/

int main(void)
{
    SYSTEM_init();

    HAL_Delay(1000); // Wait for 1 second to ensure system is stable

    while (1) {
            if (UART_rx_ready()) {
                LED_toggle();
                char buf[6];
                usart3_dma_read((uint8_t *)buf, 5);
                HAL_Delay(100); // Delay to ensure data is read completely
                buf[5] = '\0';

                if (strcmp(buf, "Hello") == 0){
                    usart3_dma_write((uint8_t *)"\n\rInput and Output Working!!\n\r", 30);
                    HAL_Delay(100);
                }
            }
        }

    __builtin_unreachable();
}
